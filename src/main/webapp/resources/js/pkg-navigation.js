define("pages/navigation_dev/js/top-nav",[],function(){var e=$(".header_2014"),t=MoGu.ui.getdoT(),n={emmitBtn:e.find(".site_publish_img"),isLoaded:!1,init:function(){this.addEvent()},addEvent:function(){var e=this;e.emmitBtn.on("click",function(){function t(){MoGu.APP.Publish&&MoGu.APP.Publish.Publish_Pub_Box_Init_Daren()}if(e.isLoaded)t();else{var n="css/pkg-nav-publish.css";if(document.createStyleSheet)document.createStyleSheet(n);else{var i=$("<link/>");i.attr("rel","stylesheet"),i.attr("href",n),$("head").append(i)}$.getScript("js/pkg-nav-publish.js").complete(function(){e.isLoaded=!0})}return!1})}};n.init();var i={};i.Tpl={headerMsgTpl:['<ul class="ext_mode login_ext message_oper">','<li class="s2">',"{{? it.catmeNew > 0 }} ",'<a href="http://www.mogujie.com/infocenter/atme">对话<span>({{= it.catmeNew }})</span></a>',"{{??}} ",'<a href="http://www.mogujie.com/infocenter/atme">对话</a>',"{{?}} ","</li>",'<li class="s2">',"{{? it.cfavedNew > 0 }} ",'<a href="http://www.mogujie.com/infocenter/fav/">喜欢我的<span>({{= it.cfavedNew }})</span></a>',"{{??}} ",'<a href="http://www.mogujie.com/infocenter/fav/">喜欢我的</a>',"{{?}} ","</li>",'<li class="s2">',"{{? it.cmsgNew > 0 }} ",'<a href="http://www.mogujie.com/infocenter/privatemsg/">我的私信<span>({{= it.cmsgNew }})</span></a>',"{{??}} ",'<a href="http://www.mogujie.com/infocenter/privatemsg/">我的私信</a>',"{{?}} ","</li>",'<li class="s2">',"{{? it.csysmsgNew > 0 }} ",'<a href="http://www.mogujie.com/infocenter/sysmsg/">系统通知<span>({{= it.csysmsgNew }})</span></a>',"{{??}} ",'<a href="http://www.mogujie.com/infocenter/sysmsg/">系统通知</a>',"{{?}} ","</li>",'<li class="s2">',"{{? it.fansNew > 0 }} ",'<a href="http://www.mogujie.com/u/'+MOGUPROFILE.userid+'/fans">我的粉丝<span>({{= it.fansNew }})</span></a>',"{{??}} ",'<a href="http://www.mogujie.com/u/'+MOGUPROFILE.userid+'/fans">我的粉丝</a>',"{{?}} ","</li>",'<li class="s2 clear_notice">','<a href="javascript:;">我知道了</a>',"</li>","</ul>"].join("")},i.View={init:function(){this.addEvent()},addEvent:function(){var e=this;$("body").on("cinfodatarecieve",function(t,n){if(n){var i=n,a={};a.twitterNew=parseInt(i.cmessageNew),a.catmeNew=parseInt(i.a),a.cfavedNew=parseInt(i.b),a.cmsgNew=parseInt(i.c),a.fansNew=parseInt(i.d),a.csysmsgNew=parseInt(i.e),a.cactiveNew=parseInt(i.f),a.intelligent=parseInt(i.g),a.ccartNew=parseInt(i.h),a.chatNew=parseInt(i.i),$.each(e.renders,function(e,t){$.isFunction(t)&&t(a)})}})},renders:{renderHeaderMsg:function(n){var a=e.find(".message_center"),s=a.find(".message_oper");if(a.length){s.length&&s.remove();var o=a.find(".m_num"),r=n.catmeNew+n.fansNew+n.cfavedNew+n.cmsgNew+n.csysmsgNew;o.text(r>0?"("+r+")":"");var c=t.template(i.Tpl.headerMsgTpl)({catmeNew:n.catmeNew,cfavedNew:n.cfavedNew,cmsgNew:n.cmsgNew,csysmsgNew:n.csysmsgNew,fansNew:n.fansNew,chatNew:n.chatNew});a.append(c),s=a.find(".message_oper"),e.on("click",".clear_notice a",function(){MoGu.util.setCookie("__mgjccInfo",null,{path:"/"}),$.post("/collect/cancelinfo");var e={catmeNew:0,cfavedNew:0,cmsgNew:0,csysmsgNew:0,fansNew:0,chatNew:0};return s.replaceWith(t.template(i.Tpl.headerMsgTpl)(e),function(){o.text(""),$(this).hide()}),!1})}},renderMsgCenter:function(e){var t=$(".message_piece_bd .message_menu");if(t.length){var n=t.find(".info_atme"),i=t.find(".info_fav"),a=t.find(".info_privatemsg"),s=t.find(".info_sysmsg");n.html(e.catmeNew>0&&n.length?'对话 <b class="atme r5">'+(e.catmeNew>999?"999+":e.catmeNew)+"</b>":"对话"),i.html(e.cfavedNew>0&&i.length?'喜欢我的 <b class="info_fav r5">'+(e.cfavedNew>999?"999+":e.cfavedNew)+"</b>":"喜欢我的"),a.html(e.cmsgNew>0&&a.length?'私信 <b class="info_fav r5">'+(e.cmsgNew>999?"999+":e.cmsgNew)+"</b>":"私信"),s.html(e.csysmsgNew>0&&s.length?'系统通知 <b class="info_fav r5">'+(e.csysmsgNew>999?"999+":e.csysmsgNew)+"</b>":"系统通知")}},renderShopCart:function(t){var n=e.find(".shopping_cart_v2");n.length&&n.find(".cart_info b").text(t.ccartNew)},renderBacktopShopCart:function(e){var t=$(".back2top_wrap .shop_cart");t.length&&(e.ccartNew?t.find(".num").html(e.ccartNew).show():t.find(".num").hide())},renderBacktopMsg:function(e){var t=$(".back2top_wrap .mogutalk_btn");t.length&&(e.chatNew?t.find(".num").html(e.chatNew).show():t.find(".num").hide())},renderTradeNum:function(e){var t=$("#intelligent_trade");t.length&&intelligent_trade.html('达人集市<span class="num">('+e.intelligent+")</span>")},renderShopDetailShopCart:function(e){var t=$("#shop_widget .num");t.length&&t.html(e.ccartNew)}}},i.View.init();var a=function(){this.highClassName="s1_on"};a.prototype={add2Collection:function(e){$.browser.msie&&6==$.browser.version&&$.isPlainObject(e)&&e.wrap.length&&e.target&&this._registerEvent(e)},_registerEvent:function(e){var t=this;e.wrap.on("mouseenter",e.target,function(){$(this).addClass(t.highClassName).siblings().removeClass(t.highClassName)}),e.wrap.on("mouseleave",e.target,function(){$(this).removeClass(t.highClassName)})}},(new a).add2Collection({wrap:$(".header_top"),target:".s1"})}),define("pages/navigation_dev/js/search",[],function(){function e(e,t){this.init(e,t)}function t(){function e(e){return $.trim(e).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}r.on("keyup keydown",function(n){var i=$(this),a=$("#select_type");if(!a.length||"bao"===a.val()||"5"===a.val())switch(n.keyCode){case 40:if("keyup"==n.type||!o.data("isshow"))break;f.chooseIndex=f.chooseIndex+1>f.tipLength-1?0:++f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 38:if("keyup"==n.type||!o.data("isshow"))break;f.chooseIndex=f.chooseIndex-1<0?f.tipLength-1:--f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 13:if("keyup"==n.type)break;n.preventDefault(),t.submitBefore(f.chooseType,f.chooseIndex),c.submit();break;case 37:break;case 39:break;default:clearTimeout(s),s=setTimeout(function(){var t=e(i.val());m.resetFactory(t)},500)}}).on("focus",function(){var t=$(this),n=$("#select_type");if(s&&clearTimeout(s),!n.length||"bao"===n.val()||"5"===n.val()){var i=e(t.val());clearTimeout(s),s=setTimeout(function(){m.resetFactory(i)},300)}}).on("blur",function(){$("body").bind("click",function(e){$(e.target).parents(".seatch_type_msearch").length||(o.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),o.on("mouseenter",".search_tip li",function(){var e=$(this),t=e.index();f.chooseIndex=t,m.changeListTab(t)}).on("click",".search_tip li",function(){t.submitBefore(f.chooseType,f.chooseIndex),r.val($(this).find(".title").text()),c.submit()}),o.on("click",".hot_list li",function(){var e=$(this);return t.submitBefore(m.hotTypeName,e.index()),r.val(e.find("span").html()),c.submit(),!1}),o.on("click",".local_del",function(){var e=$(this),t=e.parent();p.del(t.find(".title").attr("title"));var n=p.getTenItem();return m.updateLocalContent(e,n),f.chooseIndex=-1,f.tipLength=n.length,!1}).on("click",".local_title .del_all",function(){var e=$(this);return p.set(),m.destoryLocalContent(e),e.remove(),f.chooseIndex=-1,f.tipLength=0,!1}),a.on("click",".selectbox a",function(e){e.preventDefault(),m.changeType($(this))}).on("mouseenter",".selectbox",function(){o.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),c.submit(function(){var n=$(this),i=e(r.val()),a=r.attr("def-v");if(""==i||i==a){if(""==i&&"shop"==$("#select_type").val())return!1;var s=r.data("def");r.val(s||"");var o='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(o),setTimeout(function(){$("#TJ").remove()},1e3)}else i==$.trim(r.val())&&"bao"==$("#select_type").val()&&p.addOne(i);if(c.find(".emptyvalue").remove(),n.data("index")>-1&&null!==n.data("type")){var l='<input type="hidden" class="emptyvalue" name="from" value="'+n.data("type")+"querytip"+n.data("index")+'">';c.append(l)}m.destoryContent(),t.submitAfter()})}var n=MoGu.ui.getdoT(),i=MoGu.util.getStore();if(n&&i){var a=$("#nav_search_form");if(a.length){var s,o=$(".top_search_hint"),r=a.find(".ts_txt"),c=$("#top_nav_form"),l=$("#select_type"),h=a.find(".selectbox"),d="/msearch/tips/item",u={nowHost:window.location.host,defultHost:"http://www.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}",'<h3 class="search_tip_title">搜索结果</h3>',"{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="javascript:;" class="title" title="{{= item.title }}" >{{= item.title }}</a>','<span class="nums">约{{= item.num }}个商品</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">删除</span>',"{{ } }}","历史记录","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>','<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">热门关键词</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">暂无相关热门关键词</p>',"</div>"].join("")},p={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(){i.set(this.keyShowName,1)},get:function(){return i.get(this.keyName)||[]},getTenItem:function(){var e=this.get();return e.slice(0,this.showLength)},set:function(e){i.set(this.keyName,e||[])},addOne:function(e){if(e=$.trim(e),""!=e){var t=this.get(),n=$.inArray(e,t);-1==n?(t.unshift(e),t.length>this.maxLength&&t.pop()):(t.splice(n,1),t.unshift(e)),this.set(t)}},del:function(e){e=$.trim(e);var t=this.get(),n=$.inArray(e,t);n>-1&&(t.splice(n,1),this.set(t))}};e.prototype.init=function(e,t){this.chooseIndex=-1,this.chooseType=e,this.tipLength=t||0};var f=new e("undefined"),m={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},resetFactory:function(e){this.isShopHost()?this.resetShopContent(e):p.isshow()?this.resetListContent(e):this.resetOldContent(e)},resetListContent:function(t){function i(e){c.push(r.renderHotContent(e)),a(function(){s()})}function a(n){r.ajaxRequest&&r.ajaxRequest.abort();var i=p.getTenItem();return""==$.trim(t)?(c.push(r.renderLocalContent(i)),f=new e(r.localTypeName,i.length),void($.isFunction(n)&&n())):void(r.ajaxRequest=$.post(d,{input:t},function(t){if(t&&1001==t.status.code){var i=t.result.tipCount;0==i?c.push(r.renderEmptyContent()):(c.push(r.renderSearchContent(t.result.tips,t.result.nums)),f=new e(r.searchTypeName,i))}$.isFunction(n)&&n()},"json"))}function s(){var e=n.template(u.template)({searchResult:c.join("")});o.html(e),r.showContentBox()}var r=this,c=[];r.hotKeyArr.length?i(r.hotKeyArr):$.post(d,{},function(e){r.hotKeyArr=e.result.tips,i(r.hotKeyArr)},"json")},resetShopContent:function(t){function i(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(d,{input:t},function(t){if(t&&1001==t.status.code){var i=t.result.tipCount;0==i?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(t.result.tips,t.result.nums,c)),f=new e(l,i))}$.isFunction(n)&&n()},"json")}function a(){var e=n.template(u.template)({searchResult:r.join("")});o.html(e),o.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),s.showContentBox()}var s=this,r=[],c=""!=t?"搜索结果":"热门关键词",l=""!=t?s.searchTypeName:s.hotTypeName;i(function(){a()})},resetOldContent:function(t){function i(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(d,{input:t},function(t){if(t&&1001==t.status.code){var i=t.result.tipCount;0==i?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(t.result.tips,t.result.nums,c)),f=new e(l,i))}$.isFunction(n)&&n()},"json")}function a(){var e=n.template(u.template)({searchResult:r.join("")});o.html(e),o.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),s.showContentBox()}var s=this,r=[],c=""!=t?"搜索结果":"热门关键词",l=""!=t?s.searchTypeName:s.hotTypeName;i(function(){a()})},searchTypeName:"",renderSearchContent:function(e,t,i){for(var a=[],s=0;s<e.length;s++)a.push({title:e[s],num:t[s]});return n.template(u.listItemTemp)({titleName:i||null,items:a})},localTypeName:"local",renderLocalContent:function(e){return n.template(u.localItemTemp)({items:e})},updateLocalContent:function(e,t){var n=e.parent(),i=e.parents(".search_tip");if(n.length&&i.length)if(t.length<p.showLength)n.remove();else{var a=t[p.showLength-1];n.find(".title").attr("title",a).html(a),n.appendTo(i)}},destoryLocalContent:function(e){var t=e.parents(".tip_wrap").find(".search_tip");t.length&&t.empty()},hotTypeName:"default",renderHotContent:function(e){for(var t=[],i=0;i<e.length;i++)t.push({title:e[i]});return n.template(u.hotKeyTpl)({items:t})},renderEmptyContent:function(){return u.emptyTpl},destoryContent:function(){o.empty().hide()},getContentPosition:function(e,t){var n=t.offset(),i=e.data("fixleft"),a=e.data("fixtop");i&&(n.left+=parseInt(i)),a&&(n.top-=parseInt(a));var s=t.width()-34;e.css({left:n.left,top:n.top+t.height()+2,width:s}).addClass("hasposition")},showContentBox:function(){o.show().data("isshow",!0)},changeListTab:function(e){var t=o.find(".search_tip li"),n=t.eq(e);return t.removeClass("checked"),n.addClass("checked"),n.find(".title").text()},changeType:function(e){var t=e.parent(),n=t.attr("data-index"),i=e.text();if(l.val(n),h.find(".selected").text("搜"+i),t.siblings("li").removeClass("current"),t.addClass("current"),"shop"==n)r.val()==r.attr("def-v")&&r.val("");else if(""==r.val()){var a=r.attr("def-v");r.val(a)}4==n?"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/group/search/"):c.attr("action","/group/search/"):"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/search"):c.attr("action","/search/"),h.removeClass("sele_hover")}};t.submitBefore=function(e,t){c.data({type:e,index:t})},t.submitAfter=function(){c.removeData("type index"),f.chooseType="undefined",f.chooseIndex=-1};var v=function(){MoGu.util.inputTextHide(r,"ts_high"),"www.mogujie.com"===u.nowHost||h.parents(".store_header").length||c.attr("action",u.defultHost+c.attr("action")),t()};v()}}}),define("pages/navigation_dev/js/cart",[],function(){var e={};e.Model={goodsList:"",goodsNum:0,getGoodsList:function(e){var t=this;return t.goodsList?void($.isFunction(e)&&e(this.goodsList)):void $.post("/trade/cart/shoptopcart?isnew=1",{},function(n){1001==n.status.code&&(t.goodsList=n.result.html,t.goodsNum=n.result.count||0,$.isFunction(e)&&e(t.goodsList))},"json")},delGood:function(e,t){$.post("/trade/cart/delete",{stockid:e},function(e){1001==e.status.code?$.isFunction(t)&&t():alert(e.status.msg)},"json")}},e.View={wrap:$(".header_2014 .shopping_cart_v2"),init:function(){this.wrap.length&&(this.extendInfo=null,this.loading=this.wrap.find(".shopping_cart_loading"),this.maxShowNum=5,this.addEvent())},addEvent:function(){var t=this;t.wrap.on("mouseenter",function(){var n=$(this);n.addClass("sc_on"),t.loading.show(),t.extendInfo&&t.extendInfo.length?(t.loading.hide(),t.extendInfo.show()):e.Model.getGoodsList(function(e){t.extendInfo=$(e);var i=t.extendInfo.find("li");i.length>t.maxShowNum&&i.slice(t.maxShowNum,i.length).remove(),n.append(t.extendInfo),t.loading.hide(),t.extendInfo.show()})}),t.wrap.on("mouseleave",function(){t.extendInfo&&t.extendInfo.hide()&&$(this).removeClass("sc_on")}),t.wrap.on("click",".del",function(){var n=$(this),i=n.data("stockid"),a=(t.wrap.find(".num"),n.parent()),s=e.Model.goodsNum;e.Model.delGood(i,function(){s--,a.fadeOut("slow",function(){s?(a.remove(),e.Model.goodsNum=s):t.extendInfo.addClass("empty_cart").text("购物车里没有商品！")})})})}},e.View.init()}),define("pages/navigation_dev/js/navi",[],function(){var e=MoGu.util.getStore();if(e){var t=function(){var t="_nav_buyer_icon",n=$(".header_nav .buyer");e.get(t)||(new Date).getTime()>=Date.parse("2014-10-25 00:00:00")||($('<i class="icon_buyer_new">new</i>').css({position:"absolute",top:"6px",right:"20px",width:"21px",height:"11px",overflow:"hidden","text-indent":"-999em",background:"url(http://s7.mogucdn.com/pic/140925/fatiao_ieydqzjrguztcmzymmytambqmmyde_21x11.png) no-repeat"}).appendTo(n),n.on("click",function(){e.set(t,!0)}))};t()}}),define("pages/navigation_dev/js/back2top",[],function(){var e={wrap:$(".back2top_wrap"),init:function(){this.wrap.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body"),this.offsetEl.length&&(this.win=$(window),this.goTop=this.wrap.find(".go_top"),this.setPos(),this.wrap.show(),this.addEvent()))},addEvent:function(){var e=this;this.win.on("resize",function(){e.setPos()}),this.win.on("scroll",function(){$(this).scrollTop()?e.goTop.addClass("show"):e.goTop.removeClass("show")}),this.goTop.on("click",function(){return e.win.scrollTop(0),!1})},setPos:function(){var e=this.offsetEl.offset(),t=this.offsetEl.outerWidth(),n=this.win.width(),i=this.wrap.width(),a=15,s=e.left+t+20;this.wrap.css(i+s+a>n?{left:"auto",right:a}:{left:s,right:"auto"})}};e.init()}),require(["pages/navigation_dev/js/top-nav","pages/navigation_dev/js/search","pages/navigation_dev/js/cart","pages/navigation_dev/js/navi","pages/navigation_dev/js/back2top"],function(){}),define("pages/navigation_dev/pkg-navigation",function(){});