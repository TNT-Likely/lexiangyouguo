define("pages/buyer/choose/js/wall",[],function(){var i=MoGu.ui.getdoT();if(i){var t=function(i){var t={wrap:null,tpl:"",startPage:2,querySection:2,scrollDiff:1e3};i=$.extend({},t,i),this.container=i.wrap,this.feedTpl=i.tpl,this.isEnd=!1,this.loadError=!1,this.page=i.startPage||2,this.documentH=$(document).height(),this.winH=$(window).height(),this.scrollDiff=i.scrollDiff,this.loadingEl=$(".lr_loading"),this.isQuering=!1,this.screenNum=this.getScreenNum(),this.init()};return t.prototype={init:function(){this.container.length&&""!=this.feedTpl&&this.addEvent()},addEvent:function(){var i=this,t=0;$(window).on("scroll.lw",function(){var e=$(this),n=e.scrollTop();i.documentH-(n+i.winH)<=i.scrollDiff&&i.loadFeeds(),t=n}).trigger("scroll.lw"),$(window).on("rezize",function(){i.screenNum=i.getScreenNum()})},getFeeds:function(){var i=this;return $.ajax({url:"/book/ajax",type:"POST",dataType:"json",data:{book:MOGUPROFILE.book||"",section:i.page,location:MOGUPROFILE.location||""}})},getScreenNum:function(){return parseInt(this.container.width()/this.container.find(".iwf").eq(0).width())},loadFeeds:function(i){if(!(this.isQuering||this.loadError||this.isEnd)){i=i||1;var t=this;this.isQuering=!0,this.loadingEl.show(),this.getFeeds().then(function(e){if(1001!=e.status.code)return void t.stopLoading();e=e.result,t.page++,t.isEnd=e.isEnd||!1,i--,t.isQuering=!1,t.loadingEl.hide();var n=e.list.length,a=n%t.screenNum;a&&(e.list=e.list.slice(0,n-a)),t.renderFeeds(e.list),t.documentH=$(document).height(),t.isEnd&&(t.renderPager(e.pagination),$(window).off("scroll.lw")),t._afterLoad({page:t.page,isEnd:t.isEnd}),!t.isEnd&&i>0&&t.loadFeeds(i)},function(){t.stopLoading()})}},stopLoading:function(){this.isQuering=!1,this.loadError=!0,this.loadingEl.hide(),$(window).off("scroll.lw")},renderFeeds:function(t){this.container.append(i.template(this.feedTpl)({feeds:t}))},renderPager:function(){},addAfterLoadFeed:function(i){this.afterLoadList||(this.afterLoadList=[]),$.isFunction(i)&&this.afterLoadList.push(i)},_afterLoad:function(i){this.afterLoadList||(this.afterLoadList=[]),$.each(this.afterLoadList,function(t,e){e(i)})}},t}}),define("pages/shopping/js/shopindex-filter",[],function(){var i={wrap:$(".price_custom"),init:function(){this.minPrice=this.wrap.find(".min_price"),this.maxPrice=this.wrap.find(".max_price"),this.subBtn=this.wrap.find(".p_sub"),this.addEvent()},addEvent:function(){var i=this;this.wrap.on("click",".p_sub",function(){return i.validate()&&i.wrap.trigger("submit"),!1}),this.wrap.on("keydown",function(t){13==t.keyCode&&i.validate()&&i.wrap.trigger("submit")})},validate:function(){var i=/\d+/,t=1*this.minPrice.val(),e=1*this.maxPrice.val();return i.test(t)?i.test(e)?t>e?(alert("最大价格不能小于最小价格"),!1):!0:(alert("最大价格续是一个数字"),!1):(alert("最小价格续是一个数字"),!1)}};i.init(),$(".yx_filter").on("click","li",function(){{var i=$(this);i.find(".ck_box")}location.href=i.data("url")})}),define("js",["widgets/pc/slider/slider","pages/buyer/choose/js/wall","pages/shopping/js/shopindex-filter"],function(i,t){var e=new i({wrap:$(".t_slider_wrap")}),n=$(".ms_tips");e._onRenderIndex=function(i){i?1==i?n.removeClass("s1 s3").addClass("s2"):2==i&&n.removeClass("s1 s2").addClass("s3"):n.removeClass("s2 s3").addClass("s1")},e._renderAndBindAttrs();var a={wrap:$(".t_buyer_list"),toW:210,toH:210,init:function(){this.addEvent()},addEvent:function(){var i=this;this.wrap.on("click",".list_item",function(){var t=$(this);t.hasClass("on")||i.toBig(t)}).find(".list_item").eq(0).trigger("click")},toBig:function(i){var t=i.find("img"),e=t.width(),n=t.height();this.toSmall(),i.animate({top:"-="+(this.toH-n)/2,left:"-="+(this.toW-e)/2},400,function(){}),t.animate({width:this.toW,height:this.toH},400,function(){i.addClass("on").append('<a target="_blank" class="go_link" href="'+i.data("url")+'"></a>')})},toSmall:function(i){var i=i||this.wrap.find(".on"),t=i.find("img"),e=t.attr("width"),n=t.attr("height");i.find(".go_link").remove(),i.removeClass("on").animate({top:"+="+(this.toH-n)/2,left:"+="+(this.toW-e)/2},400,function(){}),t.animate({width:e,height:n},400,function(){})}};a.init();var s=new t({wrap:$("#imagewall_container"),tpl:["{{~it.feeds :feed:i}}",'<div class="iwf" data-tradeitemid="{{=feed.tradeItemId}}" data-tid="{{=feed.tid}}">','<a href="{{=feed.link}}" class="img" target="_blank"><img src="{{=feed.img}}_220x330.jpg" alt="{{=feed.title}}"></a>','<p class="title"><a href="{{=feed.link}}" target="_blank">{{=feed.title}}</a></p>','<div class="goods_info">','<b class="price_info"><i>￥</i>{{=feed.price}}</b>','<span class="fav_num">{{=feed.cfav}}</span>',"</div>","{{ if(feed.tags && feed.tags[0]){ }}",'<a class="icon_yx iwf_icon" target="_blank" href="{{=feed.link}}">{{=feed.tags[0].text}}</a>',"{{ } }}",'<span class="atags">{{=feed.atags}}</span>',"</div>","{{~}}"].join(""),startPage:1});s.addAfterLoadFeed(function(i){i.isEnd&&$("#imagewall_container").append('<a href="/book/shopping/16070/2/pop?ad=0&youxuan=1" target="_blank" class="look_more_btn">查看更多</a>')})}),require(["js"]),define("pages/buyer/choose/pkg-index",function(){});